#-import glyph.game.lib.Util
#-import glyph.game.lib.SoftKeyboard
class Ep0

game = null
preload = ->
    game.load.image('cirno', '<%= image_path("test.jpg") %>')
    # game.load.image('bg', '<%= image_path("fate.jpg") %>')
    game.load.image('bg', '<%= image_path("map-1.jpg") %>')
    # game.load.script('filterX', '../filters/BlurX.js');
    SoftKeyboard.preload(game)

create = ->
    bg = game.add.sprite(0, 0, 'bg')
    # bg.scale.setTo(4)
    bg.width = game.world.width
    bg.height = game.world.height
    # bg.hei
    # blurfilter = new PIXI.Sprite
    # blurfilter.blur = 100
    blurX = game.add.filter('BlurX')
    blurY = game.add.filter('BlurY')
    blurX.blur = blurY.blur = 40
    # blurX.blur = blurY.blur = 99

    # p blurX
    # bg.update();
    # p blurX
    bg.filters = [ blurX, blurY ]
    img = game.add.sprite(0, 0, 'cirno')
    img.x = game.world.width/2 - img.width/2
    img.y = 48
    skb = new SoftKeyboard(game)
    game.world.add(skb)
    Util.setXCenter(skb)
    # @bmd = game.add.bitmapData(1600, 1600);
    # @bmd.ctx.beginPath()
    # @bmd.ctx.rect(0, 0, 1600, 1600)
    # @bmd.ctx.fillStyle = '#FFFFFF';
    # @bmd.ctx.fill()
    # game.add.sprite(0, 0, @bmd)
    # sp = new Phaser.Sprite(game, 0, 0, 'characters_all')
    # sp.animations.add('walk')
    # sp.animations.play('walk', 5, true)
    # game.world.add(sp)

    
root.init_ep0 = ->
    game = new Phaser.Game(1280, 720, Phaser.WEBGl, 'glyph-0', { preload: preload, create: create })
    @game = game
